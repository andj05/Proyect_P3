@{
    ViewBag.Title = "Catálogo de Vehículos";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catálogo de Vehículos - Anddy Motors</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --dark-color: #1f2937;
            --light-color: #f8fafc;
            --border-color: #e5e7eb;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background: var(--light-color);
        }

        /* Header Moderno */
        .modern-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            color: white;
            padding: 2rem 0;
            position: relative;
            overflow: hidden;
        }

        .modern-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M10 10h20v20h-20z" fill="white" opacity="0.03"/><path d="M40 40h20v20h-20z" fill="white" opacity="0.03"/><path d="M70 10h20v20h-20z" fill="white" opacity="0.03"/></svg>') repeat;
            opacity: 0.1;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        .brand-logo {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .brand-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }

        /* Filtros Modernos */
        .filters-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin: -50px auto 3rem;
            max-width: 1200px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            position: relative;
            z-index: 10;
        }

        .filter-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .filter-group {
            margin-bottom: 1.5rem;
        }

        .filter-label {
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 0.5rem;
            display: block;
        }

        .modern-select, .modern-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .modern-select:focus, .modern-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .search-btn {
            background: linear-gradient(135deg, var(--primary-color), #1d4ed8);
            color: white;
            border: none;
            padding: 12px 32px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3);
        }

        /* Tipos de Vehículos */
        .tipos-section {
            margin-bottom: 4rem;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
            color: var(--dark-color);
        }

        .tipos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .tipo-card {
            background: white;
            border-radius: 16px;
            padding: 2rem 1rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .tipo-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .tipo-card.active {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(29, 78, 216, 0.05));
        }

        .tipo-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .tipo-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }

        .tipo-count {
            color: #6b7280;
            font-size: 0.9rem;
        }

        /* Marcas Section */
        .marcas-section {
            background: white;
            padding: 3rem 0;
            margin-bottom: 4rem;
        }

        .marcas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1.5rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .marca-item {
            background: #f8fafc;
            border-radius: 12px;
            padding: 1.5rem 1rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .marca-item:hover {
            transform: translateY(-3px);
            border-color: var(--primary-color);
            background: white;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .marca-item.active {
            border-color: var(--primary-color);
            background: white;
        }

        .marca-logo {
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .marca-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        /* Vehículos Grid */
        .vehiculos-section {
            margin-bottom: 4rem;
        }

        .vehiculos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 2rem;
        }

        .vehiculo-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .vehiculo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        .vehiculo-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #e5e7eb, #d1d5db);
            position: relative;
            overflow: hidden;
        }

        .vehiculo-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .vehiculo-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: var(--success-color);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .vehiculo-content {
            padding: 1.5rem;
        }

        .vehiculo-marca {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .vehiculo-titulo {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

        .vehiculo-precio {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .vehiculo-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .detalle-item {
            display: flex;
            align-items: center;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .detalle-item i {
            margin-right: 0.5rem;
            color: var(--primary-color);
        }

        .vehiculo-actions {
            display: flex;
            gap: 1rem;
        }

        .btn-ver {
            flex: 1;
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-ver:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-contacto {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-contacto:hover {
            background: #d97706;
            transform: translateY(-1px);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #6b7280;
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: #d1d5db;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--dark-color);
        }

            .filters-section {
                margin: -30px 1rem 2rem;
                padding: 1.5rem;
            }

            .tipos-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 1rem;
            }

            .vehiculos-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .vehiculo-actions {
                flex-direction: column;
            }
        }

        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 3rem;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--border-color);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

    </style>
</head>
<body>
    <!-- Header -->
    <header class="modern-header">
        <div class="header-content">
            <div class="container">
                <div class="text-center">
                    <h1 class="brand-logo">
                        <i class="fas fa-car me-3"></i>Anddy Motors
                    </h1>
                    <p class="brand-subtitle">Tu concesionario premium de confianza</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Filtros de Búsqueda -->
    <div class="container">
        <div class="filters-section">
            <h2 class="filter-title">
                <i class="fas fa-search me-2"></i>¡Busca tu Carro Ideal!
            </h2>
            <div class="row">
                <div class="col-md-3 filter-group">
                    <label class="filter-label">Estado</label>
                    <select class="modern-select" id="filtroEstado">
                        <option value="">Todos</option>
                        <option value="nuevo">Nuevo</option>
                        <option value="usado">Usado</option>
                    </select>
                </div>
                <div class="col-md-3 filter-group">
                    <label class="filter-label">Marca</label>
                    <select class="modern-select" id="filtroMarca">
                        <option value="">Todas las Marcas</option>
                    </select>
                </div>
                <div class="col-md-2 filter-group">
                    <label class="filter-label">Año Desde</label>
                    <select class="modern-select" id="filtroAnoDesde">
                        <option value="">Cualquiera</option>
                    </select>
                </div>
                <div class="col-md-2 filter-group">
                    <label class="filter-label">Año Hasta</label>
                    <select class="modern-select" id="filtroAnoHasta">
                        <option value="">Cualquiera</option>
                    </select>
                </div>
                <div class="col-md-2 filter-group">
                    <label class="filter-label">&nbsp;</label>
                    <button class="search-btn" onclick="buscarVehiculos()">
                        <i class="fas fa-search me-2"></i>Buscar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tipos de Vehículos -->
    <section class="tipos-section">
        <div class="container">
            <h2 class="section-title">Tipos de Vehículos</h2>
            <div class="tipos-grid" id="tiposGrid">
                <!-- Los tipos se cargarán dinámicamente -->
            </div>
        </div>
    </section>

    <!-- Marcas -->
    <section class="marcas-section">
        <div class="container">
            <h2 class="section-title">Marcas Disponibles</h2>
            <div class="marcas-grid" id="marcasGrid">
                <!-- Las marcas se cargarán dinámicamente -->
            </div>
        </div>
    </section>

    <!-- Vehículos -->
    <section class="vehiculos-section">
        <div class="container">
            <h2 class="section-title">Vehículos Disponibles</h2>
            <div class="vehiculos-grid" id="vehiculosGrid">
                <!-- Los vehículos se cargarán dinámicamente -->
            </div>
        </div>
    </section>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
        // Variables globales
        let tiposData = [];
        let marcasData = [];
        let vehiculosData = [];
        let filtroActivo = {
            tipo: '',
            marca: '',
            estado: '',
            anoDesde: '',
            anoHasta: ''
        };

        // Inicialización
        $(document).ready(function () {
            cargarTipos();
            cargarMarcas();
            cargarVehiculos();
            inicializarFiltros();
        });

        // Cargar tipos de vehículos
        function cargarTipos() {
            mostrarLoading('tiposGrid');

            $.ajax({
                url: '/Tipos/ConsultaTipos',
                type: 'GET',
                success: function (response) {
                    if (response && response.data) {
                        tiposData = response.data;
                        renderTipos();
                    }
                },
                error: function () {
                    // Datos de ejemplo para demostración
                    tiposData = [
                        { IDTipo: 1, Descripcion: 'Sedán', Activo: true },
                        { IDTipo: 2, Descripcion: 'SUV', Activo: true },
                        { IDTipo: 3, Descripcion: 'Hatchback', Activo: true },
                        { IDTipo: 4, Descripcion: 'Pickup', Activo: true },
                        { IDTipo: 5, Descripcion: 'Deportivo', Activo: true },
                        { IDTipo: 6, Descripcion: 'Convertible', Activo: true }
                    ];
                    renderTipos();
                }
            });
        }

        // Renderizar tipos
        function renderTipos() {
            const grid = document.getElementById('tiposGrid');
            const iconos = {
                'Sedán': 'fas fa-car',
                'SUV': 'fas fa-truck',
                'Hatchback': 'fas fa-car-side',
                'Pickup': 'fas fa-truck-pickup',
                'Deportivo': 'fas fa-car-sport',
                'Convertible': 'fas fa-car-convertible'
            };

            grid.innerHTML = tiposData.filter(tipo => tipo.Activo).map(tipo => `
                    <div class="tipo-card" onclick="filtrarPorTipo(${tipo.IDTipo}, '${tipo.Descripcion}')" data-tipo="${tipo.IDTipo}">
                        <i class="${iconos[tipo.Descripcion] || 'fas fa-car'} tipo-icon"></i>
                        <div class="tipo-name">${tipo.Descripcion}</div>
                        <div class="tipo-count">${Math.floor(Math.random() * 20) + 5} disponibles</div>
                    </div>
                `).join('');
        }

        // Cargar marcas
        function cargarMarcas() {
            mostrarLoading('marcasGrid');

            $.ajax({
                url: '/Marcas/ConsultaMarcasActivas',
                type: 'GET',
                success: function (response) {
                    if (response && response.data) {
                        marcasData = response.data;
                        renderMarcas();
                        llenarSelectMarcas();
                    }
                },
                error: function () {
                    // Datos de ejemplo
                    marcasData = [
                        { IdMarca: 1, Descripcion: 'Toyota', Activo: true },
                        { IdMarca: 2, Descripcion: 'Honda', Activo: true },
                        { IdMarca: 3, Descripcion: 'Nissan', Activo: true },
                        { IdMarca: 4, Descripcion: 'Hyundai', Activo: true },
                        { IdMarca: 5, Descripcion: 'BMW', Activo: true },
                        { IdMarca: 6, Descripcion: 'Mercedes', Activo: true }
                    ];
                    renderMarcas();
                    llenarSelectMarcas();
                }
            });
        }

        // Renderizar marcas
        function renderMarcas() {
            const grid = document.getElementById('marcasGrid');

            grid.innerHTML = marcasData.filter(marca => marca.Activo).map(marca => `
                    <div class="marca-item" onclick="filtrarPorMarca(${marca.IdMarca}, '${marca.Descripcion}')" data-marca="${marca.IdMarca}">
                        <div class="marca-logo">
                            ${marca.Descripcion.substring(0, 2).toUpperCase()}
                        </div>
                        <div class="marca-name">${marca.Descripcion}</div>
                    </div>
                `).join('');
        }

        // Llenar select de marcas
        function llenarSelectMarcas() {
            const select = document.getElementById('filtroMarca');
            select.innerHTML = '<option value="">Todas las Marcas</option>' +
                marcasData.filter(marca => marca.Activo).map(marca =>
                    `<option value="${marca.IdMarca}">${marca.Descripcion}</option>`
                ).join('');
        }

        // Cargar vehículos
        function cargarVehiculos() {
            mostrarLoading('vehiculosGrid');

            $.ajax({
                url: '/Vehiculos/ConsultaVehiculosCatalogo',
                type: 'GET',
                success: function (response) {
                    if (response && response.data) {
                        vehiculosData = response.data;
                        renderVehiculos();
                    }
                },
                error: function () {
                    // Datos de ejemplo para demostración
                    vehiculosData = [
                        {
                            ID: 1,
                            MarcaNombre: 'Toyota',
                            Modelo: 'Corolla',
                            Ano: 2023,
                            Precio: 850000,
                            TipoNombre: 'Sedán',
                            Estado: 'nuevo',
                            Kilometraje: 0,
                            Combustible: 'Gasolina',
                            Transmision: 'Automática',
                            ImagenBase64: null,
                            ContactoTelefono: '(809) 555-0123'
                        },
                        {
                            ID: 2,
                            MarcaNombre: 'Honda',
                            Modelo: 'CR-V',
                            Ano: 2022,
                            Precio: 1200000,
                            TipoNombre: 'SUV',
                            Estado: 'usado',
                            Kilometraje: 15000,
                            Combustible: 'Gasolina',
                            Transmision: 'Automática',
                            ImagenBase64: null,
                            ContactoTelefono: '(809) 555-0124'
                        }
                    ];
                    renderVehiculos();
                }
            });
        }

        // Renderizar vehículos
        function renderVehiculos() {
            const grid = document.getElementById('vehiculosGrid');

            if (vehiculosData.length === 0) {
                grid.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-car"></i>
                            <h3>No se encontraron vehículos</h3>
                            <p>Intenta ajustar los filtros de búsqueda</p>
                        </div>
                    `;
                return;
            }

            grid.innerHTML = vehiculosData.map(vehiculo => `
                    <div class="vehiculo-card">
                        <div class="vehiculo-image">
                            ${vehiculo.ImagenBase64 ?
                    `<img src="data:image/jpeg;base64,${vehiculo.ImagenBase64}" alt="${vehiculo.MarcaNombre} ${vehiculo.Modelo}">` :
                    `<div style="display: flex; align-items: center; justify-content: center; height: 100%; background: linear-gradient(135deg, #e5e7eb, #d1d5db); color: #6b7280; font-size: 3rem;"><i class="fas fa-car"></i></div>`
                }
                            <div class="vehiculo-badge">${vehiculo.Estado === 'nuevo' ? 'Nuevo' : 'Usado'}</div>
                        </div>
                        <div class="vehiculo-content">
                            <div class="vehiculo-marca">${vehiculo.MarcaNombre}</div>
                            <h3 class="vehiculo-titulo">${vehiculo.Modelo} ${vehiculo.Ano}</h3>
                            <div class="vehiculo-precio">RD$ ${vehiculo.Precio.toLocaleString()}</div>
                            <div class="vehiculo-detalles">
                                <div class="detalle-item">
                                    <i class="fas fa-calendar"></i>
                                    ${vehiculo.Ano}
                                </div>
                                <div class="detalle-item">
                                    <i class="fas fa-tachometer-alt"></i>
                                    ${vehiculo.Kilometraje ? vehiculo.Kilometraje.toLocaleString() : 0} km
                                </div>
                                <div class="detalle-item">
                                    <i class="fas fa-gas-pump"></i>
                                    ${vehiculo.Combustible || 'N/A'}
                                </div>
                                <div class="detalle-item">
                                    <i class="fas fa-cogs"></i>
                                    ${vehiculo.Transmision || 'N/A'}
                                </div>
                            </div>
                            <div class="vehiculo-actions">
                                <button class="btn-ver" onclick="verDetalles(${vehiculo.ID})">
                                    <i class="fas fa-eye me-1"></i>Ver Detalles
                                </button>
                                <button class="btn-contacto" onclick="contactar(${vehiculo.ID})">
                                    <i class="fas fa-phone"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
        }

        // Funciones de filtrado
        function filtrarPorTipo(tipoId, tipoNombre) {
            document.querySelectorAll('.tipo-card').forEach(card => {
                card.classList.remove('active');
            });

            document.querySelector(`[data-tipo="${tipoId}"]`).classList.add('active');

            filtroActivo.tipo = tipoNombre;
            aplicarFiltros();
        }

        function filtrarPorMarca(marcaId, marcaNombre) {
            document.querySelectorAll('.marca-item').forEach(item => {
                item.classList.remove('active');
            });

            document.querySelector(`[data-marca="${marcaId}"]`).classList.add('active');

            filtroActivo.marca = marcaNombre;
            document.getElementById('filtroMarca').value = marcaId;
            aplicarFiltros();
        }

        function buscarVehiculos() {
            const marcaSelect = document.getElementById('filtroMarca');
            filtroActivo.estado = document.getElementById('filtroEstado').value;
            filtroActivo.marca = marcaSelect.options[marcaSelect.selectedIndex].text;
            filtroActivo.anoDesde = document.getElementById('filtroAnoDesde').value;
            filtroActivo.anoHasta = document.getElementById('filtroAnoHasta').value;

            aplicarFiltros();
        }

        function aplicarFiltros() {
            mostrarLoading('vehiculosGrid');

            // Aquí aplicarías los filtros reales usando AJAX
            $.ajax({
                url: '/Vehiculos/FiltrarCatalogo',
                type: 'GET',
                data: {
                    estado: filtroActivo.estado,
                    marcaId: document.getElementById('filtroMarca').value,
                    anoDesde: filtroActivo.anoDesde,
                    anoHasta: filtroActivo.anoHasta
                },
                success: function (response) {
                    if (response && response.data) {
                        vehiculosData = response.data;
                        renderVehiculos();
                    }
                },
                error: function () {
                    setTimeout(() => {
                        renderVehiculos();
                    }, 800);
                }
            });
        }

        // Funciones auxiliares
        function mostrarLoading(elementId) {
            document.getElementById(elementId).innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                `;
        }

        function inicializarFiltros() {
            // Llenar años
            const currentYear = new Date().getFullYear();
            const startYear = 2000;

            const selectDesde = document.getElementById('filtroAnoDesde');
            const selectHasta = document.getElementById('filtroAnoHasta');

            for (let year = currentYear; year >= startYear; year--) {
                selectDesde.innerHTML += `<option value="${year}">${year}</option>`;
                selectHasta.innerHTML += `<option value="${year}">${year}</option>`;
            }
        }

        function verDetalles(vehiculoId) {
            const vehiculo = vehiculosData.find(v => v.ID === vehiculoId);
            if (vehiculo) {
                // Crear modal de detalles dinámicamente
                const modalHtml = `
                        <div class="modal fade" id="modalDetalles" tabindex="-1">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title">
                                            <i class="fas fa-car me-2"></i>
                                            ${vehiculo.MarcaNombre} ${vehiculo.Modelo} ${vehiculo.Ano}
                                        </h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                ${vehiculo.ImagenBase64 ?
                        `<img src="data:image/jpeg;base64,${vehiculo.ImagenBase64}" class="img-fluid rounded mb-3" alt="${vehiculo.MarcaNombre} ${vehiculo.Modelo}">` :
                        `<div class="bg-light rounded mb-3 d-flex align-items-center justify-content-center" style="height: 250px; color: #6b7280; font-size: 4rem;"><i class="fas fa-car"></i></div>`
                    }
                                            </div>
                                            <div class="col-md-6">
                                                <h4 class="text-primary mb-3">RD$ ${vehiculo.Precio.toLocaleString()}</h4>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Marca:</strong></div>
                                                    <div class="col-6">${vehiculo.MarcaNombre}</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Modelo:</strong></div>
                                                    <div class="col-6">${vehiculo.Modelo}</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Año:</strong></div>
                                                    <div class="col-6">${vehiculo.Ano}</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Estado:</strong></div>
                                                    <div class="col-6">
                                                        <span class="badge ${vehiculo.Estado === 'nuevo' ? 'bg-success' : 'bg-warning'}">${vehiculo.Estado === 'nuevo' ? 'Nuevo' : 'Usado'}</span>
                                                    </div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Kilometraje:</strong></div>
                                                    <div class="col-6">${vehiculo.Kilometraje ? vehiculo.Kilometraje.toLocaleString() : 0} km</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Combustible:</strong></div>
                                                    <div class="col-6">${vehiculo.Combustible || 'N/A'}</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Transmisión:</strong></div>
                                                    <div class="col-6">${vehiculo.Transmision || 'N/A'}</div>
                                                </div>
                                                <div class="row mb-2">
                                                    <div class="col-6"><strong>Tipo:</strong></div>
                                                    <div class="col-6">${vehiculo.TipoNombre || 'N/A'}</div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr>
                                        <h5><i class="fas fa-star me-2"></i>Características Adicionales</h5>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <ul class="list-unstyled">
                                                    <li><i class="fas fa-check text-success me-2"></i>Aire Acondicionado</li>
                                                    <li><i class="fas fa-check text-success me-2"></i>Dirección Hidráulica</li>
                                                    <li><i class="fas fa-check text-success me-2"></i>Frenos ABS</li>
                                                    <li><i class="fas fa-check text-success me-2"></i>Airbags</li>
                                                </ul>
                                            </div>
                                            <div class="col-md-6">
                                                <ul class="list-unstyled">
                                                    <li><i class="fas fa-check text-success me-2"></i>Sistema de Audio</li>
                                                    <li><i class="fas fa-check text-success me-2"></i>Vidrios Eléctricos</li>
                                                    <li><i class="fas fa-check text-success me-2"></i>Seguros Eléctricos</li>
                                                    <li><i class="fas fa-check text-success me-2"></i>Garantía Extendida</li>
                                                </ul>
                                            </div>
                                        </div>
                                        ${vehiculo.Ubicacion ? `
                                            <hr>
                                            <h6><i class="fas fa-map-marker-alt me-2"></i>Ubicación</h6>
                                            <p class="mb-0">${vehiculo.Ubicacion}</p>
                                        ` : ''}
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                        <button type="button" class="btn btn-warning" onclick="contactar(${vehiculo.ID})">
                                            <i class="fas fa-phone me-2"></i>Contactar Vendedor
                                        </button>
                                        <button type="button" class="btn btn-primary">
                                            <i class="fas fa-heart me-2"></i>Guardar en Favoritos
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;

                // Remover modal anterior si existe
                const existingModal = document.getElementById('modalDetalles');
                if (existingModal) {
                    existingModal.remove();
                }

                // Agregar modal al DOM
                document.body.insertAdjacentHTML('beforeend', modalHtml);

                // Mostrar modal
                const modal = new bootstrap.Modal(document.getElementById('modalDetalles'));
                modal.show();
            }
        }

        function contactar(vehiculoId) {
            const vehiculo = vehiculosData.find(v => v.ID === vehiculoId);
            if (vehiculo) {
                // Crear modal de contacto
                const modalContactoHtml = `
                        <div class="modal fade" id="modalContacto" tabindex="-1">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header bg-warning text-white">
                                        <h5 class="modal-title">
                                            <i class="fas fa-phone me-2"></i>
                                            Contactar sobre ${vehiculo.MarcaNombre} ${vehiculo.Modelo}
                                        </h5>
                                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                                    </div>
                                    <div class="modal-body">
                                        <form id="formContacto">
                                            <div class="mb-3">
                                                <label class="form-label"><strong>Nombre Completo</strong></label>
                                                <input type="text" class="form-control" id="contactoNombre" required placeholder="Tu nombre completo">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label"><strong>Teléfono</strong></label>
                                                <input type="tel" class="form-control" id="contactoTelefono" required placeholder="(809) 000-0000">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label"><strong>Email</strong></label>
                                                <input type="email" class="form-control" id="contactoEmail" required placeholder="tu@email.com">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label"><strong>Mensaje</strong></label>
                                                <textarea class="form-control" id="contactoMensaje" rows="4" placeholder="Estoy interesado en este vehículo, me gustaría más información..."></textarea>
                                            </div>
                                            <div class="alert alert-info">
                                                <i class="fas fa-info-circle me-2"></i>
                                                <strong>Vehículo de interés:</strong><br>
                                                ${vehiculo.MarcaNombre} ${vehiculo.Modelo} ${vehiculo.Ano} - RD$ ${vehiculo.Precio.toLocaleString()}
                                            </div>
                                            ${vehiculo.ContactoTelefono ? `
                                                <div class="alert alert-success">
                                                    <i class="fas fa-phone me-2"></i>
                                                    <strong>También puedes llamar directamente:</strong><br>
                                                    ${vehiculo.ContactoTelefono}
                                                </div>
                                            ` : ''}
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                        <button type="button" class="btn btn-warning" onclick="enviarContacto(${vehiculoId})">
                                            <i class="fas fa-paper-plane me-2"></i>Enviar Mensaje
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;

                // Remover modal anterior si existe
                const existingModal = document.getElementById('modalContacto');
                if (existingModal) {
                    existingModal.remove();
                }

                document.body.insertAdjacentHTML('beforeend', modalContactoHtml);
                const modal = new bootstrap.Modal(document.getElementById('modalContacto'));
                modal.show();
            }
        }

        function enviarContacto(vehiculoId) {
            const nombre = document.getElementById('contactoNombre').value;
            const telefono = document.getElementById('contactoTelefono').value;
            const email = document.getElementById('contactoEmail').value;
            const mensaje = document.getElementById('contactoMensaje').value;

            // Validaciones básicas
            if (!nombre || !telefono || !email) {
                mostrarNotificacion('Por favor, completa todos los campos obligatorios.', 'error');
                return;
            }

            const submitBtn = document.querySelector('#modalContacto .btn-warning');
            const originalText = submitBtn.innerHTML;

            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Enviando...';
            submitBtn.disabled = true;

            // Enviar contacto via AJAX
            $.ajax({
                url: '/Vehiculos/EnviarContacto',
                type: 'POST',
                data: {
                    VehiculoID: vehiculoId,
                    Nombre: nombre,
                    Telefono: telefono,
                    Email: email,
                    Mensaje: mensaje
                },
                success: function (response) {
                    if (response.success) {
                        submitBtn.innerHTML = '<i class="fas fa-check me-2"></i>¡Enviado!';
                        submitBtn.classList.remove('btn-warning');
                        submitBtn.classList.add('btn-success');

                        setTimeout(() => {
                            bootstrap.Modal.getInstance(document.getElementById('modalContacto')).hide();
                            mostrarNotificacion('Mensaje enviado correctamente. Nos contactaremos contigo pronto.', 'success');
                        }, 1500);
                    } else {
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;
                        mostrarNotificacion(response.error || 'Error al enviar el mensaje', 'error');
                    }
                },
                error: function () {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                    mostrarNotificacion('Error de conexión. Inténtalo nuevamente.', 'error');
                }
            });
        }

        function mostrarNotificacion(mensaje, tipo = 'info') {
            const alertClass = tipo === 'success' ? 'alert-success' : tipo === 'error' ? 'alert-danger' : 'alert-info';
            const iconClass = tipo === 'success' ? 'fa-check-circle' : tipo === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle';

            const notificationHtml = `
                    <div class="alert ${alertClass} alert-dismissible fade show position-fixed"
                         style="top: 20px; right: 20px; z-index: 9999; min-width: 300px;">
                        <i class="fas ${iconClass} me-2"></i>
                        ${mensaje}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                `;

            document.body.insertAdjacentHTML('beforeend', notificationHtml);

            // Auto-remover después de 5 segundos
            setTimeout(() => {
                const alert = document.querySelector('.alert');
                if (alert) {
                    alert.remove();
                }
            }, 5000);
        }

        // Función para limpiar filtros
        function limpiarFiltros() {
            document.getElementById('filtroEstado').value = '';
            document.getElementById('filtroMarca').value = '';
            document.getElementById('filtroAnoDesde').value = '';
            document.getElementById('filtroAnoHasta').value = '';

            document.querySelectorAll('.tipo-card').forEach(card => {
                card.classList.remove('active');
            });

            document.querySelectorAll('.marca-item').forEach(item => {
                item.classList.remove('active');
            });

            filtroActivo = {
                tipo: '',
                marca: '',
                estado: '',
                anoDesde: '',
                anoHasta: ''
            };

            cargarVehiculos();
        }

        // Función para scroll suave a sección
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({
                behavior: 'smooth'
            });
        }
    </script>

    <!-- Botón flotante para limpiar filtros -->
    <div class="position-fixed" style="bottom: 20px; right: 20px; z-index: 1000;">
        <button class="btn btn-secondary rounded-circle p-3" onclick="limpiarFiltros()" title="Limpiar Filtros">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <!-- Footer Simple -->
    <footer class="bg-dark text-white text-center py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5><i class="fas fa-car me-2"></i>Anddy Motors</h5>
                    <p class="mb-0">Tu concesionario de confianza</p>
                </div>
                <div class="col-md-4">
                    <h6>Contacto</h6>
                    <p class="mb-0">
                        <i class="fas fa-phone me-2"></i>(809) 000-0000<br>
                        <i class="fas fa-envelope me-2"></i>info@anddymotors.com
                    </p>
                </div>
                <div class="col-md-4">
                    <h6>Síguenos</h6>
                    <div>
                        <a href="#" class="text-white me-3"><i class="fab fa-facebook fa-lg"></i></a>
                        <a href="#" class="text-white me-3"><i class="fab fa-instagram fa-lg"></i></a>
                        <a href="#" class="text-white"><i class="fab fa-whatsapp fa-lg"></i></a>
                    </div>
                </div>
            </div>
            <hr class="my-3">
            <p class="mb-0">&copy; 2024 Anddy Motors. Todos los derechos reservados.</p>
        </div>
    </footer>
</body>
</html>